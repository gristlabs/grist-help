<!DOCTYPE html>
<html lang="fr">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
      <meta name="description" content="Reference and Reference List columns in Grist allow one table to create an explicit reference to another. 
A common example of this is seen in the Class Enrollment template.">
      <meta property="og:description" content="Reference and Reference List columns in Grist allow one table to create an explicit reference to another. 
A common example of this is seen in the Class Enrollment template.">
    
    
    <link rel="canonical" href="https://support.getgrist.com/references-lookups/">
    <link rel="shortcut icon" href="/images/favicon.png">
    <link rel="me" href="https://fosstodon.org/@grist">
    <meta name="thumbnail" content="https://support.getgrist.com/images/favicon.png">
    <meta property="og:image" content="https://support.getgrist.com/images/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>References and lookups - Grist Help Center</title>
    
  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5FDHKQ9');</script>
  <!-- End Google Tag Manager -->
    <link href="/css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="/css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="/css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/highlight.css">
    <link href="../css/grist.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="/js/jquery-3.2.1.min.js"></script>
    <script src="/js/bootstrap-3.3.7.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script src="/js/elasticlunr.min.js"></script>
    <script>
      var base_url = '..';
      var is_top_frame = false;
    </script>
    <script src="/js/base.js"></script>
      <script src="../js/grist.js"></script>
    <script type="text/javascript">!function(e,t,n){function a(){var e=t.getElementsByTagName("script")[0],n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://beacon-v2.helpscout.net",e.parentNode.insertBefore(n,e)}if(e.Beacon=n=function(t,n,a){e.Beacon.readyQueue.push({method:t,options:n,data:a})},n.readyQueue=[],"complete"===t.readyState)return a();e.attachEvent?e.attachEvent("onload",a):e.addEventListener("load",a,!1)}(window,document,window.Beacon||function(){});</script>
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function() {
    window.Beacon('config', {display: { style: 'icon' }});
    window.Beacon('init', 'fc61df2a-664b-4422-b24f-964bd0cb6d53');
    window.Beacon('suggest', [
      {url: 'https://community.getgrist.com/', text: 'Community Forum'},
      {url: 'https://docs.getgrist.com/p/templates', text: 'Templates'},
      {url: 'https://github.com/gristlabs/grist-core/projects/1', text: 'Roadmap'},
    ]);

    fetch('https://api.getgrist.com/api/session/access/all', {credentials: 'include'})
      .then(function(resp) { return resp.json(); })
      .then(function(status) {
        // If there's exactly two orgs, will use the team name for the non-merged personal
        // org as the company name.  Otherwise don't worry about setting company name.
        var org = undefined;
        if (status.orgs.length === 2) {
          org = status.orgs[0].owner ? status.orgs[1] : status.orgs[0];
        }
        // If there's one user account available, fill it in silently; otherwise use
        // the first one and prefill fields but let user see them so they can override
        // them.  If testing this, be aware that if 'identify' was called previously,
        // it will be cached in local storage and used even if it is not set this time
        // around.
        var user = status.users[0];
        var identifyOrPrefill = status.users.length === 1 ? 'identify' : 'prefill';
        if (user && !user.anonymous) {
          var userObj = {};
          if (user.email) { userObj.email = user.email; }
          if (user.name) { userObj.name = user.name; }
          if (user.picture) { userObj.avatar = user.picture; }
          if (user.helpScoutSignature) { userObj.signature = user.helpScoutSignature; }
          if (org && org.name) { userObj.company = org.name; }
          window.Beacon(identifyOrPrefill, userObj);
        }
      });
  });
</script> 
</head>

<body>
  
  

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5FDHKQ9"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

<nav class="navbar wm-page-top-frame">
  <div class="container-fluid wm-top-container">
    
    <div class="wm-top-tool pull-right wm-vcenter">
      <form class="dropdown wm-vcentered" id="wm-search-form" action="/search.html" method="GET">
        
        <button id="wm-search-show" class="btn btn-sm btn-default" type="submit"
          ><i class="fa fa-search" aria-hidden="true"></i></button>

        <div class="input-group input-group-sm wm-top-search">
          <input type="text" name="q" class="form-control" id="mkdocs-search-query" placeholder="Search" autocomplete="off">
          <span class="input-group-btn" role="search">
            
            <button class="btn btn-default dropdown-toggle collapse" data-toggle="dropdown" type="button"><span class="caret"></span></button>
            <ul id="mkdocs-search-results" class="dropdown-menu dropdown-menu-right"></ul>
            <button id="wm-search-go" class="btn btn-default" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
          </span>
        </div>
      </form>
    </div>

    
    <div class="wm-top-tool wm-vcenter pull-right wm-small-left wm-top-toc-button">
      <button id="wm-toc-button" type="button" class="btn btn-sm btn-default wm-vcentered"><i class="fa fa-th-list" aria-hidden="true"></i></button>
    </div>
    <select id="wm-language-select" class="wm-top-tool wm-vcenter pull-right wm-small-left home-top-tool-selector" name="lang"
      
      >
      
      <option value="/" >en - English</option>
      
      <option value="/fr/" selected>fr - fran√ßais</option>
      
    </select>

    
    

    
    
      <a href="https://community.getgrist.com" class="wm-top-tool wm-top-link pull-right wm-vcenter home-link ">
        <div class="wm-top-title">
          Community
        </div>
      </a>
    
      <a href="https://www.getgrist.com" class="wm-top-tool wm-top-link pull-right wm-vcenter home-link wm-small-hide">
        <div class="wm-top-title">
          Back to Grist
        </div>
      </a>
    

    
    <a href=".." class="wm-top-brand wm-top-link wm-vcenter">
      
        <img class="wm-top-logo" src="../images/logo.png"/>
      
      <div class="wm-top-title">
        Grist Help Center<br>
        
          <span class="wm-top-version">1.0.2-dev</span>
        
      </div>
    </a>
  </div>
</nav>

<div id="main-content">
  
<nav class="wm-toc-pane">
  
  <ul class="wm-toctree">
        <li class="wm-toc-li wm-toc-lev1 "><a href=".." class="wm-article-link wm-toc-text">Welcome to Grist</a>

    
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="../FAQ/" class="wm-article-link wm-toc-text">FAQ</a>

    
</li>
        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">How-to tutorials</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../lightweight-crm/" class="wm-article-link wm-toc-text">Create your own CRM</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../investment-research/" class="wm-article-link wm-toc-text">Analyze and visualize</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../afterschool-program/" class="wm-article-link wm-toc-text">Manage business data</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Managing documents</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../creating-doc/" class="wm-article-link wm-toc-text">Creating a document</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../sharing/" class="wm-article-link wm-toc-text">Sharing a document</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../copying-docs/" class="wm-article-link wm-toc-text">Copying documents</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../imports/" class="wm-article-link wm-toc-text">Importing more data</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../exports/" class="wm-article-link wm-toc-text">Exports & backups</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../automatic-backups/" class="wm-article-link wm-toc-text">Automatic backups</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../document-history/" class="wm-article-link wm-toc-text">Document history</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../workspaces/" class="wm-article-link wm-toc-text">Workspaces</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Pages and tables</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../enter-data/" class="wm-article-link wm-toc-text">Entering data</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../page-widgets/" class="wm-article-link wm-toc-text">Pages & widgets</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../raw-data/" class="wm-article-link wm-toc-text">Raw data</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../search-sort-filter/" class="wm-article-link wm-toc-text">Search, sort & filter</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../widget-table/" class="wm-article-link wm-toc-text">Table widget</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../widget-card/" class="wm-article-link wm-toc-text">Card & card list</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../widget-form/" class="wm-article-link wm-toc-text">Form</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../widget-chart/" class="wm-article-link wm-toc-text">Chart</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../widget-calendar/" class="wm-article-link wm-toc-text">Calendar</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../widget-custom/" class="wm-article-link wm-toc-text">Custom</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../linking-widgets/" class="wm-article-link wm-toc-text">Linking widgets</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../custom-layouts/" class="wm-article-link wm-toc-text">Custom layouts</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../record-cards/" class="wm-article-link wm-toc-text">Record cards</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../summary-tables/" class="wm-article-link wm-toc-text">Summary tables</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../on-demand-tables/" class="wm-article-link wm-toc-text">On-demand tables</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Columns and data types</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../col-types/" class="wm-article-link wm-toc-text">Columns & types</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../col-refs/" class="wm-article-link wm-toc-text">Reference columns</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../conditional-formatting/" class="wm-article-link wm-toc-text">Conditional formatting</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../timestamps/" class="wm-article-link wm-toc-text">Timestamp columns</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../authorship/" class="wm-article-link wm-toc-text">Authorship columns</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../col-transform/" class="wm-article-link wm-toc-text">Transformations</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Using formulas</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../formulas/" class="wm-article-link wm-toc-text">Intro to formulas</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2  wm-current wm-page-toc-opener wm-page-toc-open"><a href="./" class="wm-article-link wm-toc-text">References and lookups</a>

    
    
    <li class="wm-page-toc wm-toc-li-nested collapse in">
      <ul class="wm-toctree">
        
          <li class="wm-toc-li">
            <a class="wm-article-link wm-page-toc-text" href="#_top">
              Using References and Lookups in Formulas
            </a>
          </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#reference-columns-and-dot-notation">
                Reference columns and dot notation
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#chaining">
                Chaining
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#lookupone">
                lookupOne
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#lookupone-and-dot-notation">
                lookupOne and dot notation
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#lookupone-and-sort_by">
                lookupOne and sort_by
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#understanding-record-sets">
                Understanding record sets
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#reference-lists-and-dot-notation">
                Reference lists and dot notation
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#lookuprecords">
                lookupRecords
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#reverse-lookups">
                Reverse lookups
              </a>
            </li>
            <li class="wm-toc-li">
              <a class="wm-article-link wm-page-toc-text" href="#working-with-record-sets">
                Working with record sets
              </a>
            </li>
        
      </ul>
    </li>
    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../dates/" class="wm-article-link wm-toc-text">Working with dates</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../formula-timer/" class="wm-article-link wm-toc-text">Formula timer</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../python/" class="wm-article-link wm-toc-text">Python versions</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../functions/" class="wm-article-link wm-toc-text">Function reference</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../formula-cheat-sheet/" class="wm-article-link wm-toc-text">Formula cheat sheet</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">AI Formula Assistant</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../ai-assistant/" class="wm-article-link wm-toc-text">AI Formula Assistant</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Team sites</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../teams/" class="wm-article-link wm-toc-text">Creating team sites</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../team-sharing/" class="wm-article-link wm-toc-text">Sharing team sites</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Access rules</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../access-rules/" class="wm-article-link wm-toc-text">Intro to access rules</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Integrations</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../rest-api/" class="wm-article-link wm-toc-text">REST API usage</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../api/" class="wm-article-link wm-toc-text">REST API reference</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../integrators/" class="wm-article-link wm-toc-text">Integrator services</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../embedding/" class="wm-article-link wm-toc-text">Embedding</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 wm-toc-opener"><span class="wm-toc-text">Plugin API</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev3 "><a href="../code/" class="wm-article-link wm-toc-text">Intro to Plugin API</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="../code/modules/grist_plugin_api/" class="wm-article-link wm-toc-text">grist-plugin-api</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="/... | flat | **/code/modules/**" class="wm-article-link wm-toc-text">AWESOME_PAGES_REST</a>

    
</li>
  </ul>
</li>

  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Self-managed</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../self-managed/" class="wm-article-link wm-toc-text">Self-managed Grist</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../install/saml/" class="wm-article-link wm-toc-text">SAML</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../install/oidc/" class="wm-article-link wm-toc-text">OIDC</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../install/forwarded-headers/" class="wm-article-link wm-toc-text">Forwarded headers</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../install/cloud-storage/" class="wm-article-link wm-toc-text">Cloud storage</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../install/grist-connect/" class="wm-article-link wm-toc-text">GristConnect</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../install/aws-marketplace/" class="wm-article-link wm-toc-text">AWS Marketplace</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 wm-toc-opener"><span class="wm-toc-text">Telemetry</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev3 "><a href="../telemetry/" class="wm-article-link wm-toc-text">Overview of telemetry</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="../telemetry-limited/" class="wm-article-link wm-toc-text">Limited telemetry</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="../telemetry-full/" class="wm-article-link wm-toc-text">Full telemetry</a>

    
</li>
  </ul>
</li>

  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">News & updates</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/" class="wm-article-link wm-toc-text">Newsletters</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2024-06/" class="wm-article-link wm-toc-text">2024/06</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2024-05/" class="wm-article-link wm-toc-text">2024/05</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2024-04/" class="wm-article-link wm-toc-text">2024/04</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2024-03/" class="wm-article-link wm-toc-text">2024/03</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2024-02/" class="wm-article-link wm-toc-text">2024/02</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2024-01/" class="wm-article-link wm-toc-text">2024/01</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-12/" class="wm-article-link wm-toc-text">2023/12</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-11/" class="wm-article-link wm-toc-text">2023/11</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-10/" class="wm-article-link wm-toc-text">2023/10</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-09/" class="wm-article-link wm-toc-text">2023/09</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-08/" class="wm-article-link wm-toc-text">2023/08</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-07/" class="wm-article-link wm-toc-text">2023/07</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-06/" class="wm-article-link wm-toc-text">2023/06</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-05/" class="wm-article-link wm-toc-text">2023/05</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-04/" class="wm-article-link wm-toc-text">2023/04</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-03/" class="wm-article-link wm-toc-text">2023/03</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-02/" class="wm-article-link wm-toc-text">2023/02</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2023-01/" class="wm-article-link wm-toc-text">2023/01</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-12/" class="wm-article-link wm-toc-text">2022/12</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-11/" class="wm-article-link wm-toc-text">2022/11</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-10/" class="wm-article-link wm-toc-text">2022/10</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-09/" class="wm-article-link wm-toc-text">2022/09</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-08/" class="wm-article-link wm-toc-text">2022/08</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-07/" class="wm-article-link wm-toc-text">2022/07</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-06/" class="wm-article-link wm-toc-text">2022/06</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-05/" class="wm-article-link wm-toc-text">2022/05</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-04/" class="wm-article-link wm-toc-text">2022/04</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-03/" class="wm-article-link wm-toc-text">2022/03</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-02/" class="wm-article-link wm-toc-text">2022/02</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2022-01/" class="wm-article-link wm-toc-text">2022/01</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-12/" class="wm-article-link wm-toc-text">2021/12</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-11/" class="wm-article-link wm-toc-text">2021/11</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-10/" class="wm-article-link wm-toc-text">2021/10</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-09/" class="wm-article-link wm-toc-text">2021/09</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-08/" class="wm-article-link wm-toc-text">2021/08</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-07/" class="wm-article-link wm-toc-text">2021/07</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-06/" class="wm-article-link wm-toc-text">2021/06</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-05/" class="wm-article-link wm-toc-text">2021/05</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-04/" class="wm-article-link wm-toc-text">2021/04</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-03/" class="wm-article-link wm-toc-text">2021/03</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-02/" class="wm-article-link wm-toc-text">2021/02</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2021-01/" class="wm-article-link wm-toc-text">2021/01</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-12/" class="wm-article-link wm-toc-text">2020/12</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-11/" class="wm-article-link wm-toc-text">2020/11</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-10/" class="wm-article-link wm-toc-text">2020/10</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-09/" class="wm-article-link wm-toc-text">2020/09</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-08/" class="wm-article-link wm-toc-text">2020/08</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-07/" class="wm-article-link wm-toc-text">2020/07</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-06/" class="wm-article-link wm-toc-text">2020/06</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../newsletters/2020-05/" class="wm-article-link wm-toc-text">2020/05</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">More examples</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/" class="wm-article-link wm-toc-text">More examples</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-06-credit-card/" class="wm-article-link wm-toc-text">Credit card expenses</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-06-book-club/" class="wm-article-link wm-toc-text">Book club links</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-07-email-compose/" class="wm-article-link wm-toc-text">Prefill emails</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-08-invoices/" class="wm-article-link wm-toc-text">Prepare invoices</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-09-payroll/" class="wm-article-link wm-toc-text">Track payroll</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-10-print-labels/" class="wm-article-link wm-toc-text">Print mailing labels</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-11-treasure-hunt/" class="wm-article-link wm-toc-text">Treasure hunt</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2020-12-map/" class="wm-article-link wm-toc-text">Map</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2021-01-tasks/" class="wm-article-link wm-toc-text">Task management</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2021-03-leads/" class="wm-article-link wm-toc-text">Lead list</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2021-04-link-keys/" class="wm-article-link wm-toc-text">Link keys guide</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2021-05-reference-columns/" class="wm-article-link wm-toc-text">Reference columns guide</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2021-06-timesheets/" class="wm-article-link wm-toc-text">Summary tables guide</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2021-07-auto-stamps/" class="wm-article-link wm-toc-text">Time and user stamps</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2023-01-acl-memo/" class="wm-article-link wm-toc-text">Restrict duplicate records</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../examples/2023-07-proposals-contracts/" class="wm-article-link wm-toc-text">Proposals & contracts</a>

    
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Reference</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="../keyboard-shortcuts/" class="wm-article-link wm-toc-text">Keyboard shortcuts</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="/functions/" class="wm-article-link wm-toc-text">Function reference</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../limits/" class="wm-article-link wm-toc-text">Limits</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../data-security/" class="wm-article-link wm-toc-text">Data security</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../browser-support/" class="wm-article-link wm-toc-text">Browser support</a>

    
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="../glossary/" class="wm-article-link wm-toc-text">Glossary</a>

    
</li>
  </ul>
</li>

  </ul>

  <div class="wm-toc-quick-links">
    <div class="wm-toc-quick-links-header"><span class="wm-toc-text">Quick Links</span></div>
    <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2">
        <a href="https://community.getgrist.com/" class="wm-quick-link wm-toc-text">Community</a>
      </li>
      <li class="wm-toc-li wm-toc-lev2">
        <a href="https://docs.getgrist.com/p/templates" class="wm-quick-link wm-toc-text">Templates</a>
      </li>
      <li class="wm-toc-li wm-toc-lev2">
        <a href="https://github.com/gristlabs/grist-core/projects/1" class="wm-quick-link wm-toc-text">Roadmap</a>
      </li>
    </ul>
    <ul class="wm-toctree wm-toc-repo">
      <li class="wm-toc-li wm-toc-lev2">
      <a class="wm-quick-link wm-toc-text" href="https://github.com/gristlabs/grist-help">
        <i class="fa fa-github"></i>

        Edit on GitHub
      </a>
      </li>
    </ul>

  </div>

</nav>

  <script>
    // Immediately expand parent items to show the selected page.
    $('.wm-current')
      .parents('.wm-toc-li-nested').addClass('collapse in')
      .prev('.wm-toc-opener').addClass('wm-toc-open');
  </script>
  <div class="wm-content-pane">
    <div class="wm-article">

<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../dates/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../dates/" class="btn btn-xs btn-link">
        Working with dates
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../formulas/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../formulas/" class="btn btn-xs btn-link">
        Intro to formulas
      </a>
    </div>
    
  </div>

    

    <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Nous commen√ßons tout juste √† traduire la documentation pour cette langue, d√©sol√© !</p>
<p>Nous affichons des pages traduites partiellement afin de suivre l&rsquo;avancement.</p>
<p>Cette page n&rsquo;est pas encore traduite. Mais la bonne nouvelle est que <a class="internal-link" href="https://hosted.weblate.org/engage/grist-help/" target="_blank">vous pouvez rejoindre la communaut√© de traduction pour nous aider üëã</a>.</p>
</div>
<h1 id="using-references-and-lookups-in-formulas">Using References and Lookups in Formulas<a class="headerlink" href="#using-references-and-lookups-in-formulas" title="Permanent link">#</a></h1>
<p><a href="../col-refs/">Reference and Reference List columns</a> in Grist allow one table to create an explicit reference to another. 
A common example of this is seen in the <a href="https://templates.getgrist.com/doc/afterschool-program">Class Enrollment</a> template.</p>
<p>On the Staff page, we have a list of staff members. On the classes page, we have a reference column labeled Instructor that 
references the records on our Staff page. </p>
<p><span class="screenshot-large"><em><img alt="reference-column" src="../images/references-lookups/reference-column.png" /></em></span></p>
<p>Keep in mind, it‚Äôs not just referencing the Full Name column but the entire record associated with the selected instructor. </p>
<h2 id="reference-columns-and-dot-notation">Reference columns and dot notation<a class="headerlink" href="#reference-columns-and-dot-notation" title="Permanent link">#</a></h2>
<p>Using a Reference column within a formula can make it easy to get any data from the referenced record. To do this, we use dot notation. It uses the format <code>$A.B</code> where <code>A</code> is the name of the reference column and <code>B</code> is the name of the column in the referenced table that we want to pull data from.</p>
<p>Let‚Äôs see this in action on the <a href="https://templates.getgrist.com/doc/afterschool-program/p/7">Enrollment View</a> page of the Class Enrollment template. Dot notation is used in the Class_Times column of the ENROLLMENTS table, found at the bottom right of the Enrollment View page.</p>
<p><span class="screenshot-large"><em><img alt="class-times" src="../images/references-lookups/class-times.png" /></em></span></p>
<p>We can see that the Class_Times column is using a formula with dot notation. Using the format <code>$A.B</code> described above, we can figure out that Class is the name of the reference column and Times is the name of the column in the referenced table.</p>
<p>Let‚Äôs track this back to where it‚Äôs pulling from - since the reference column is Class, we can look at that column‚Äôs information to find out what table it is pulling from.</p>
<p><span class="screenshot-large"><em><img alt="reference-classes" src="../images/references-lookups/reference-classes.png" /></em></span></p>
<p>The Class column references data from the Classes table. Therefore, the Class_Times column is pulling from the Times column of the Classes table.</p>
<p><span class="screenshot-large"><em><img alt="classes-times" src="../images/references-lookups/classes-times.png" /></em></span></p>
<h2 id="chaining">Chaining<a class="headerlink" href="#chaining" title="Permanent link">#</a></h2>
<p>If the reference lookup returns a reference, this can be chained. </p>
<p>Perhaps we want to add the Instructor‚Äôs phone number to the Enrollments table. We can use the Class reference column to pull the instructor‚Äôs information from the Classes table.</p>
<p><span class="screenshot-large"><em><img alt="chaining-class-instructor" src="../images/references-lookups/chaining-class-instructor.png" /></em></span></p>
<p>As you can see in the screenshot above, the instructor column is a reference column itself. If we follow the format from before, our dot notation would be <code>$Class.Instructor</code> but the Instructor column points to the entire record of the instructor so we need to tell it what information we want from this record, creating a chain.</p>
<p>The instructor column references the Staff table so we navigate there to find out what column we need to pull information from in order to get the phone number. The column that contains the instructor‚Äôs phone number is Phone.</p>
<p><span class="screenshot-large"><em><img alt="chaining-instructor-phone" src="../images/references-lookups/chaining-instructor-phone.png" /></em></span></p>
<p>Putting this all together, our dot notation for the instructor‚Äôs phone number would be <code>$Class.Instructor.Phone</code></p>
<p><span class="screenshot-large"><em><img alt="instructor-phone" src="../images/references-lookups/instructor-phone.png" /></em></span></p>
<p>What happens if we leave our formulas as <code>$Class.Instructor</code>? You will see a numeric record ID of the record in the Staff table that the Instructor column points to.</p>
<p class="screenshot-half"><span class="screenshot-large"><em><img alt="class-instructor" src="../images/references-lookups/class-instructor.png" /></em></span></p>
<p>That&rsquo;s what a reference column really stores. If you change the type of this formula column to Reference, you will be able to select a column to show, such as the Full Name. </p>
<p><span class="screenshot-large"><em><img alt="reference-class-instructor" src="../images/references-lookups/reference-class-instructor.png" /></em></span></p>
<p>Another way to see the name is to chain the dot-notation, as we did for phone: <code>$Class.Instructor.Full_Name</code>.</p>
<p><span class="screenshot-large"><em><img alt="instructor-details" src="../images/references-lookups/instructor-details.png" /></em></span></p>
<h2 id="lookupone">lookupOne<a class="headerlink" href="#lookupone" title="Permanent link">#</a></h2>
<p>Another way to point to a record is using <code>Table.lookupOne(...)</code> function. <a href="https://support.getgrist.com/functions/#lookupone">lookupOne</a> allows you to look up a record by some fields, similar to Excel&rsquo;s VLOOKUP. In fact, Grist&rsquo;s version of VLOOKUP is merely an alias for lookupOne. lookupOne is rarely useful in Grist, because using a Reference type column is usually the preferred solution to connect records. However, on some occasions, lookupOne can be useful. </p>
<p>One situation is when you have two sets of data which overlap even though they represent something different and perhaps come from different sources. An example of this can be found in our <a href="https://public.getgrist.com/6kTypo2FtSsf/Event-Sponsors-Attendees-References-and-Lookups/m/fork">Event Sponsors + Attendees (References and Lookups)</a> document which is a modified version of the Event Sponsors + Attendees template, available in our <a href="https://public.getgrist.com/p/templates">template gallery</a>. </p>
<p>Let&rsquo;s say that you run an event and have a list of registered attendees, as well as Sponsors. Registered attendees are stored in the All Registrations table, perhaps populated via a form integration. </p>
<p class="screenshot-half"><span class="screenshot-large"><em><img alt="attendees" src="../images/references-lookups/attendees.png" /></em></span></p>
<p>Sponsors are listed in a separate table, with fields related to their sponsorship, and perhaps maintained by another team. </p>
<p><span class="screenshot-large"><em><img alt="sponsors" src="../images/references-lookups/sponsors.png" /></em></span></p>
<p>Both tables contain email addresses which identify attendees and sponsors. Sometimes a sponsor may register to attend the event. In that case, you&rsquo;ll have an Attendee record with an email address that also appears in the Sponsors table. That&rsquo;s useful to know for someone looking at the attendee list. </p>
<p>You can lookup a record in the sponsors table by email address by using a lookupOne formula. The Sponsor column in the All Registrations table does just that using this formula:</p>
<pre><code>Sponsors.lookupOne(Contact_Email=$Registration_Email)
</code></pre>

<p>This formula is looking to see if a Contact Email from the Sponsors table matches a Registration Email from the All Registrations table. </p>
<p>The general format for a lookupOne formula is: </p>
<pre><code>[Table_Name].lookupOne([A]=$[B])
</code></pre>

<p><code>[Table_Name]</code> is the name of the table you want to lookup data in. <code>[A]</code> is the column in the table being looked up (named at the beginning of the formula) and <code>[B]</code> is the column in the current table / the table you are entering the formula in.</p>
<p><span class="screenshot-large"><em><img alt="sponsors-lookupone-text" src="../images/references-lookups/sponsors-lookupone-text.png" /></em></span></p>
<p>Such a formula returns a reference. In the screenshot above, you can see the lookup result returns <code>Sponsors[#]</code>. The number it returns between square brackets is the record ID of the lookup result. Where it returns <code>Sponsors[0]</code>, no match was found. </p>
<p>It&rsquo;s often a good idea to create a column for the lookup result and change its type to Reference, as you see in the screenshot below. Then, if there is a match, the reference column will point to the entire matched record. Like any reference column, you can select which field from that record to show. In this example, it shows the Company field of the matched record in the Sponsors table.</p>
<p><span class="screenshot-large"><em><img alt="sponsors-lookupone" src="../images/references-lookups/sponsors-lookupone.png" /></em></span></p>
<h2 id="lookupone-and-dot-notation">lookupOne and dot notation<a class="headerlink" href="#lookupone-and-dot-notation" title="Permanent link">#</a></h2>
<p>Because lookupOne is creating a reference to a record, we can use dot notation to look up additional fields in that record.</p>
<p>In the <a href="https://public.getgrist.com/6kTypo2FtSsf/Event-Sponsors-Attendees-References-and-Lookups/p/1">example</a> above, <code>Sponsors.lookupOne(Contact_Email=$Registration_Email)</code> is checking if a Contact Email from the Sponsors table matches a Registration Email from the All Registrations table.</p>
<p>What if we also wanted to look up the sponsor level?</p>
<p>We can add <code>.Sponsor_Level</code> to the lookupOne formula, and, if a match is found, look up the value in the sponsor level column for the matched record.</p>
<p>The entire formula would be <code>Sponsors.lookupOne(Contact_Email=$Registration_Email).Sponsor_Level</code>.</p>
<p><span class="screenshot-large"><em><img alt="sponsor-level-lookupone" src="../images/references-lookups/sponsor-level-lookupone.png" /></em></span></p>
<p>Now, we have the Sponsor Level listed in the All Registrations table for those attendees whose emails also appear on the sponsor list.</p>
<h2 id="lookupone-and-sort_by">lookupOne and sort_by<a class="headerlink" href="#lookupone-and-sort_by" title="Permanent link">#</a></h2>
<p>When the¬†<code>lookupOne</code>¬†function encounters multiple matching results, it returns the first one by row ID. The optional¬†<code>sort_by</code>¬†parameter can be used to sort these results by another field, to determine which one would be returned as the first match. You can also prefix the column ID with &ldquo;-&rdquo; to reverse the order.</p>
<p>For instance, consider this example from the <a href="https://templates.getgrist.com/doc/afterschool-program">Class Enrollment</a> template. This template tracks enrollment for extracurricular and other classes - logging information for students, families, and staff. </p>
<p>On this page, we have a list of students and their respective information.</p>
<p><span class="screenshot-large"><em><img alt="student-table" src="../images/references-lookups/students-final-2.png" /></em></span></p>
<p>Additionally, we have a Families page that outlines the parent of each student and we‚Äôd like to find which student in each family is the oldest. So, we would create an oldest student column.</p>
<p><span class="screenshot-large"><em><img alt="family-table" src="../images/references-lookups/families-final-2.png" /></em></span></p>
<p>Then, the following formula would look at the Students table, find the specific students associated with each family, sort them by their birthday, and return the one student with the earliest birthday: </p>
<p><code>Students.lookupOne(Family=$id, sort_by="Birthday")</code></p>
<p>In this case, this would return: Raddon, Brockie. </p>
<p>Alternatively, if we want to find the youngest student, the formula would include &ldquo;-&ldquo;: </p>
<p><code>Students.lookupOne(Family=$id, sort_by="-Birthday‚Äù)</code></p>
<p>In this case, this would return: Raddon, Care. </p>
<h2 id="understanding-record-sets">Understanding record sets<a class="headerlink" href="#understanding-record-sets" title="Permanent link">#</a></h2>
<p>Sometimes a record may reference multiple records in another table. Multiple references can be made with a Reference List Column. </p>
<p>A great example of this is seen on the <a href="https://templates.getgrist.com/1BR9vm6GPTGX/Habit-Tracker">Habit Tracker</a> template. </p>
<p>On the Habits + Goals page, we have a list of habits and a goal for how often we wish to complete that habit. On the Habit Tracker page, we have a Reference List column labeled Habits Completed that references the records on our Habits + Goals page. </p>
<p>The only difference between a Reference column and a Reference List column is the ability to select multiple references. This creates a set of records which can be used in formulas.</p>
<p><span class="screenshot-large"><em><img alt="habit-tracker" src="../images/references-lookups/habit-tracker.png" /></em></span></p>
<h2 id="reference-lists-and-dot-notation">Reference lists and dot notation<a class="headerlink" href="#reference-lists-and-dot-notation" title="Permanent link">#</a></h2>
<p>Similar to references, you can use Dot Notation with reference lists. </p>
<p>Building on our prior <a href="https://public.getgrist.com/6kTypo2FtSsf/Event-Sponsors-Attendees-References-and-Lookups/p/3">example</a> of attendees at a conference, suppose we have a list of registrants for an event and want to find the balance for each registrant. To do this, we can use dot notation.</p>
<p>Here, <code>$Registrants</code> is a reference list. Our Great Outdoors Expo has 4 registrants. We can see the list of registrants in the Registrants column. This list is a reference to the Name column of the All Registrants table. </p>
<p><span class="screenshot-large"><em><img alt="reference-list-registrants" src="../images/references-lookups/reference-list-registrants.png" /></em></span></p>
<p>With a reference list, dot-notation returns a list of all the selected field;</p>
<p><span class="screenshot-large"><em><img alt="registrants-balance" src="../images/references-lookups/registrants-balance.png" /></em></span></p>
<p><code>$Registrants.Balance</code> is a list of the Balances for each attendee in the list of <code>$Registrants</code>. This follows the format <code>$[A].[B]</code> where <code>[A]</code> is the name of the Reference List column and <code>[B]</code> is the name of the column in the referenced table you wish to pull data from. We&rsquo;ll learn how to find the sum of these balances in <a href="#working-with-record-sets">Working with Record Sets</a>.</p>
<h2 id="lookuprecords">lookupRecords<a class="headerlink" href="#lookuprecords" title="Permanent link">#</a></h2>
<p>You can also get a list of references using <a href="https://support.getgrist.com/functions/#lookuprecords">lookupRecords</a>.</p>
<p>The formula for lookupRecords follows this format:</p>
<pre><code>[Table_Name].lookupRecords([A]=$[B])
</code></pre>

<p><code>[Table_Name]</code> is the name of the table you want to lookup data in. <code>[A]</code> is the column in the table being looked up (named at the beginning of the formula) and <code>[B]</code> is the column in the current table / the table you are entering the formula in.</p>
<p>Suppose we want a list of the events attended by each person in our <a href="https://public.getgrist.com/6kTypo2FtSsf/Event-Sponsors-Attendees-References-and-Lookups/p/4">Email List</a> table. We can use lookupRecords to do this. First, we need to lookup records where the email listed in the All Registrations table matches an email in this list. Then, find the event associated with each of those records. </p>
<p>Following the format above, our initial formula is:</p>
<pre><code>All_Registrations.lookupRecords(Registration_Email=$Email)
</code></pre>

<p><span class="screenshot-large"><em><img alt="lookup-records" src="../images/references-lookups/lookup-records.png" /></em></span></p>
<p><code>All_Registrations.lookupRecords(Registration_Email=$Email)</code> returns a list of record IDs for each record in the All Registrations table where the Registration Email matches the Email in this row of the Email List table. Next, we need to find the Event associated with each of these records. To do this, we can use dot notation.</p>
<p><code>All_Registrations.lookupRecords(Registration_Email=$Email).Event</code> will return the value from the Event column for each record found.</p>
<p><span class="screenshot-large"><em><img alt="lookup-records-dot-notation" src="../images/references-lookups/lookup-records-dot-notation.png" /></em></span></p>
<p>We saw similar results using the <a href="#lookupone">lookupOne</a> function. It&rsquo;s helpful to change the column type to Reference List, as you see in the screenshot below. Then, if there is a match, the reference list column will point to the entire record for each match. Like any reference list column, you can select which field you want to show for the matched records. In this example, it shows the Event field of the Events table for each matched record in the Attendees table.</p>
<p><span class="screenshot-large"><em><img alt="lookup-records-reference-list" src="../images/references-lookups/lookup-records-reference-list.png" /></em></span></p>
<h2 id="reverse-lookups">Reverse lookups<a class="headerlink" href="#reverse-lookups" title="Permanent link">#</a></h2>
<p>LookupRecords works a bit differently if a reference exists between two tables. With a reverse lookup, we can use the record ID to find a record. </p>
<p>Every row has a numeric id (available as <code>$id</code> in formulas) that is unique within that table. You can reveal the ID by adding a formula column where formula is <code class="formula">$id</code></p>
<p class="screenshot-half"><span class="screenshot-large"><em><img alt="row-id" src="../images/references-lookups/row-id.png" /></em></span></p>
<p>Let&rsquo;s take a look at the Registrants column of the <a href="https://public.getgrist.com/6kTypo2FtSsf/Event-Sponsors-Attendees-References-and-Lookups/p/3">Events</a> table. </p>
<p><span class="screenshot-large"><em><img alt="lookup-records-id" src="../images/references-lookups/lookup-records-id.png" /></em></span></p>
<p>The formula used here is <code>All_Registrations.lookupRecords(Event=$id)</code>. We use the id to find a match because in the All Registrations table, the Event column is a reference column which means its value is a record&rsquo;s id.</p>
<p>Because All_Registrations.Event is a reference column pointing to an Event record in the Events table, we can match the id stored in the reference column to the ids of records in the Events table. That&rsquo;s why the argument in the formula is <code>Event=$id</code>.</p>
<p>We use the existing reference, just in reverse - hence the name, Reverse Lookup.</p>
<p><span class="screenshot-large"><em><img alt="reverse-lookup" src="../images/references-lookups/reverse-lookup.png" /></em></span></p>
<p>If you‚Äôd like a video walkthrough of a reverse lookup, we have an example in our <a href="https://www.youtube.com/watch?v=0qVDPZd2w9I&amp;t=788s">Build with Grist Webinar - Trigger Formulas v. Formulas</a>.</p>
<h2 id="working-with-record-sets">Working with record sets<a class="headerlink" href="#working-with-record-sets" title="Permanent link">#</a></h2>
<p>lookupRecords can also be used within other formulas.</p>
<p><code>SUM()</code> can be useful to find a sum of all numbers in a list of records. Once you find your list of records using the lookupRecords function and dot notation, you can use <code>SUM()</code> to sum all values returned, like you see in this formula:</p>
<pre><code>SUM(Table.lookupRecords(Column_A=$Column_B).Column_C)
</code></pre>

<p>You can also do this on a reference list because a reference list is the same thing, a list of records.</p>
<pre><code>SUM($RefList.Column)
</code></pre>

<p>In the <a href="#reference-lists-and-dot-notation">Reference lists and dot notation</a> section, we used the Registrants column and dot notation to find the balance for each person in our list of Registrants. We can use <code>SUM()</code> with our prior formula to find the total balance.</p>
<pre><code>SUM($Registrants.Balance)
</code></pre>

<p><span class="screenshot-large"><em><img alt="registrants-balance-sum" src="../images/references-lookups/registrants-balance-sum.png" /></em></span></p>
<p>We can also use lookupRecords to get the list of references, rather than using a reference list column, then find the sum of the balance for all registrants. This method is used in the Ticket Revenue column of the <a href="https://public.getgrist.com/6kTypo2FtSsf/Event-Sponsors-Attendees-References-and-Lookups/p/3">Events</a> table using the following formula:</p>
<pre><code>SUM(All_Registrations.lookupRecords(Event=$id).Balance)
</code></pre>

<p><code>All_Registrations.lookupRecords(Event=$id).Balance</code> finds all records in the All Registrations table where the Event column matches the ID of the row in this table, Events. Using dot notation, we find the Balance for each of the records found. Then <code>SUM()</code> sums the balances of all records found.</p>
<p><span class="screenshot-large"><em><img alt="lookup-records-registrants-balance-sum" src="../images/references-lookups/lookup-records-registrants-balance-sum.png" /></em></span></p>
<p>You can also iterate through a Reference List using a Python <code>for</code> loop. An example of this can be seen in the Balance (&lsquo;for&rsquo; loop) column in the Events table. When iterating, each element is a Reference so dot-notation can be used here as well. To find the sum of the balance for all registrants, we use the following formula:</p>
<pre><code>SUM(person.Balance for person in $Registrants)
</code></pre>

<p>This does the same thing as our lookupRecords formula we saw above. <code>$Registrants</code> is our reference list. For each record (<code>person</code>) in our list of Registrants, we find the Balance. Then, sum all balances together. In this formula, <code>person</code> is a variable that represents each element in our list and could be replaced with any other variable.</p>
<p><span class="screenshot-large"><em><img alt="reference-list-for-loop-sum" src="../images/references-lookups/reference-list-for-loop-sum.png" /></em></span></p>
<p>If you‚Äôd like to learn more about <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions">Data Structures and List Comprehension</a> in Python 3, <a href="http://python.org/">Python.org</a> is a great resource.</p>
<p><code>len()</code> can be useful to get the number of items within a list. Once you find your list of records using the lookupRecords function, you can use <code>len()</code> to count the number of records returned, like you see in this formula:</p>
<pre><code>len(Table.lookupRecords(Column_A=$Column_B))
</code></pre>

<p>You can also do this on a reference list.</p>
<pre><code>len($RefList)
</code></pre>

<p>We want to see how many events our Sponsors have attended. We can use lookupRecords to do this. The following formula is used in the Events Attended column of the <a href="https://public.getgrist.com/6kTypo2FtSsf/Event-Sponsors-Attendees-References-and-Lookups/p/2">Sponsors</a> table.</p>
<pre><code>len(All_Registrations.lookupRecords(Sponsor=$id))
</code></pre>

<p><span class="screenshot-large"><em><img alt="attendees-lookuprecords" src="../images/references-lookups/attendees-lookuprecords.png" /></em></span></p>
<p>Let&rsquo;s break down the two parts of this formula, working from the inside out.</p>
<p><code>All_Registrations.lookupRecords(Sponsor=$id)</code> is looking for matches where the record in the Sponsor column of the All Registrations table has the same ID as the record in this row of the Sponsors table. All records in the All Registrations table that match are added to a list of records. Try writing the formula without <code>len()</code> to see what Grist returns. It should look something like this.</p>
<p class="screenshot-half"><span class="screenshot-large"><em><img alt="without-len" src="../images/references-lookups/without-len.png" /></em></span></p>
<p>That&rsquo;s a list of records.</p>
<p><code>len()</code> counts how many records are in that list.</p>
<p class="screenshot-half"><span class="screenshot-large"><em><img alt="len" src="../images/references-lookups/len.png" /></em></span></p>
<p>We can also include multiple arguments in a lookupRecords formula. An example of this can be found in the Count column of the Classes table of the <a href="https://public.getgrist.com/doc/eW4nqWfK1k3K~8iDuMy8ApPXvzhcemSiYsS~14207/p/6">Class Enrollment</a> template. This column shows us how many students are enrolled in each class. The formula used here is:</p>
<pre><code>len(Enrollments.lookupRecords(Class=$id, Status=&quot;Confirmed&quot;))
</code></pre>

<p><span class="screenshot-large"><em><img alt="lookup-records-multiple" src="../images/references-lookups/lookup-records-multiple.png" /></em></span></p>
<p>This lookup uses two fields. It will look for records in the Enrollment table where Status is ‚ÄúConfirmed‚Äù and the Class column matches the ID of the row in this table. Because the Class column is referencing the Classes table, we use the record ID <code>$id</code> in the lookup.</p>
<p>Finally, <code>len()</code> counts the items in the list returned by <code>Enrollments.lookupRecords(Class=$id, Status="Confirmed")</code>.</p>
<p>Average, min and max are a few of the other functions that can be used with lookupRecords formulas. See all available functions on our <a href="../functions/">Function reference</a> page.</p>

  <br>
</div>

<div class="feedback-box">
  <div class="feedback-box-title">Give Feedback</div>
  <div class="feedback-box-question">Was this article helpful?</div>
  <div class="feedback-box-buttons">
    <button class="feedback-box-button" data-rating="thumbsUp">&#x1F44D;</button>
    <button class="feedback-box-button" data-rating="thumbsDown">&#x1F44E;</button>
  </div>
  <div class="feedback-box-response">
    Thank you for letting us know!
  </div>
</div>

<script>
function initFeedbackButtons() {
  const serverUrl = "https://docs.getgrist.com";
  const feedbackBox = document.querySelector('.feedback-box');
  const buttons = document.querySelectorAll('.feedback-box-button');
  document.querySelector('.feedback-box-buttons').addEventListener('click', giveFeedback);

  async function giveFeedback(event) {
    const rating = event.target.dataset.rating;
    if (!rating) { return; }
    buttons.forEach(b => { b.disabled = true; });
    try {
      console.log("Sending rating to " + serverUrl + '/api/telemetry');
      const resp = await window.fetch(serverUrl + '/api/telemetry', makePayload(rating));
      if (!resp.ok) { throw new Error(resp.statusText); }
    } catch (err) {
      console.warn('Failed to report feedback', err);
      document.querySelector('.feedback-box-response').textContent = String(err);
    } finally {
      buttons.forEach(b => { b.disabled = false; });
      feedbackBox.classList.add('feedback-submitted');
    }
  }

  function makePayload(rating) {
    const url = window.location.href;
    return {
      method: 'POST',
      body: JSON.stringify({
        event: 'ratedHelpCenterArticle',
        metadata: {full: {url, rating}},
      }),
      credentials: 'same-origin',
      headers: {
        'Content-Type': 'application/json',
        'X-Requested-With': 'XMLHttpRequest',
      },
    };
  }
}
initFeedbackButtons();
</script><footer class="col-md-12 wm-page-content">
      <p>
        <a href="https://github.com/gristlabs/grist-help/edit/master/docs/references-lookups.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

    </div>
  </div>
</div>

<div class="modal fade" id="video-modal" tabindex="-1" role="dialog" aria-labelledby="video-modal" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <div style="position:relative; padding-bottom:56.25%; margin-top: 32px;">
          <iframe src="" allowfullscreen style="position:absolute; left:0; top:0; width:100%; height:100%"></iframe>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>